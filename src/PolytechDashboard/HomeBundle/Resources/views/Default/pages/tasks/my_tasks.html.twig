<!-- Content Header (Page header) -->
<section class="content-header">
	<h1>Mes t&acircches</h1>
</section>

<section class="content">

	<!-- 1er tableau : les taches que l'etudiant a recues -->
	<div class="box box-task">
		<!-- Titre du tableau -->
		<div class="box-header">
			<h3 class="box-title">T&acircches Re&ccedilues</h3>
		</div>
		<!-- Corps du tableau -->
		<div class="box-body">
			<table class="table table-bordered table-striped table-task">
				<thead>
					<tr>
						<th style="width: 5%;">NÂ°</th>
						<th style="width: 12%;">ReÃ§u le</th>
						<th style="width: 12%;">&Eacutech&eacuteance</th>
						<th>De</th>
						<th>Objet</th>
						<th style="width: 11%;">Importance</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<!-- Exemple d'une tÃ¢che -->
					{% for task in myTasks.tasksReceived %}
					<tr>
						<td>{{ task.getId()}}</td>
						<td>{{ task.getDatecreation() }}</td>
						<td>{{ task.getDatefin() }}</td>
						{% if task.getIdgestionnaire() is empty %}						
							<!-- Tache attribue par un etudiant lui meme -->
							<td>{{ nom }} {{ prenom }}</td>
						{% else %}
							<!-- Tache attribue par un gestionnaire -->						
							<td>{{ myTasks.admins[loop.index0].getNom() }} {{ myTasks.admins[loop.index0].getPrenom() }}</td>							
						{% endif %}						
						<td>{{ task.getNom() }}</td>
						<!-- Icone "importance" -->
						<td style="text-align: center;"><i
							class="fa fa-exclamation-triangle importance{{ task.getImportance() }}">
								<div style="display: none;">{{ task.getImportance() }}</div>
						</i></td>

						<!-- Icone "voir dÃ©tail" -->
						<td style="text-align: center;"><a
							href="#infos_task_{{ task.getId()}}" data-toggle="modal"><i
								class="fa fa-search"></i></a></td>
						<!-- Debut modal view -->
						<div class="modal fade" id="infos_task_{{ task.getId()}}">
							<div class="modal-dialog">
								<div class="modal-content">
									<!-- En tete -->
									<div class="modal-header modal-header-task">
										<button type="button" class="close" data-dismiss="modal">x</button>
										<div class="modal-title">Tache nÂ°{{ task.getId()}} - {{ task.getNom() }}</div>

									</div>
									<!-- En tete prÃ©sentant le body -->
									<div class="modal-header modal-before-body">
									
										{% if task.getIdgestionnaire() is empty %}						
											<!-- Tache attribue par un etudiant lui meme -->
											De : {{ nom }} {{ prenom }}											
										{% else %}
											<!-- Tache attribue par un gestionnaire -->						
											De : {{ myTasks.admins[loop.index0].getNom() }} {{	myTasks.admins[loop.index0].getPrenom() }}
										{% endif %}									
										
										<div class="date_modal">
											<div class="date_debut">Date d'attribution : {{	task.getDatecreation() }}</div>
											<div class="date_fin">Ã‰chÃ©ance : {{ task.getDatefin() }}</div>
										</div>
									</div>
									<!-- Corps -->
									<div class="modal-body">
										<h4>Contenu :</h4>
										<p>{{ task.getStructure() }}</p>
									</div>
									<!-- Footer -->
									<div class="modal-footer">
										<button class="btn btn-success pull-left" data-dismiss="modal">Editer</button>
										<button class="btn btn-danger pull-left" data-dismiss="modal">Supprimer</button>
										<button class="btn btn-primary" data-dismiss="modal">Fermer</button>
									</div>
								</div>
							</div>
						</div>
						<!-- Fin modal view -->
					</tr>
					{% else %}
					<!-- besoin d'avoir le même nombre de cellules, sinon erreur javascript -->
					<tr class="sous_ensemble">
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td style="text-align: left; padding-left: 20px;">Aucune tache
							trouvee</td>
						<td></td>
						<td></td>
					</tr>
					{% endfor %}

				</tbody>
			</table>
		</div>
		<!-- /.box-body -->
	</div>
	<!-- /.box -->

	<!-- 2eme tableau : les taches que l'etudiant a envoyees -->
	<div class="box box-task">
		<!-- Titre du tableau -->
		<div class="box-header">
			<h3 class="box-title">TÃ¢ches envoy&eacutees</h3>
		</div>
		<!-- Corps du tableau -->
		<div class="box-body">
			<table class="table table-bordered table-striped table-task">
				<thead>
					<tr>
						<th style="width: 5%;">NÂ°</th>
						<th style="width: 12%;">Envoy&eacutee le</th>
						<th style="width: 12%;">&Eacutech&eacuteance</th>
						<th>Pour</th>
						<th>Objet</th>
						<th style="width: 11%;">Importance</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					{% for task in myTasks.tasksSend %}
					<tr>
						<td>{{ task.getId()}}</td>
						<td>{{ task.getDatecreation() }}</td>
						<td>{{ task.getDatefin() }}</td>						
						<td>{{ myTasks.adminsTaskSend[loop.index0].getNom() }} {{	myTasks.adminsTaskSend[loop.index0].getPrenom() }}</td>										
						<td>{{ task.getNom() }}</td>
						<!-- Icone "importance" -->
						<td style="text-align: center;"><i
							class="fa fa-exclamation-triangle importance{{ task.getImportance() }}">
								<div style="display: none;">{{ task.getImportance() }}</div>
						</i></td>

						<!-- Icone "voir dÃ©tail" -->
						<td style="text-align: center;"><a
							href="#infos_task_{{ task.getId()}}" data-toggle="modal"><i
								class="fa fa-search"></i></a></td>
						<!-- Debut modal view -->
						<div class="modal fade" id="infos_task_{{ task.getId()}}">
							<div class="modal-dialog">
								<div class="modal-content">
									<!-- En tete -->
									<div class="modal-header modal-header-task">
										<button type="button" class="close" data-dismiss="modal">x</button>
										<div class="modal-title">Tache nÂ°{{ task.getId()}} - {{ task.getNom() }}</div>

									</div>
									<!-- En tete prÃ©sentant le body -->
									<div class="modal-header modal-before-body">
										Pour : {{ nom }} {{ prenom }}
										<div class="date_modal">
											<div class="date_debut">Date envoi : {{ task.getDatecreation() }}</div>
											<div class="date_fin">Ã‰chÃ©ance : {{ task.getDatefin() }}</div>
										</div>
									</div>
									<!-- Corps -->
									<div class="modal-body">
										<h4>Contenu :</h4>
										<!-- TODO, ajouter le contenu de la tache envoyée -->
										<p>{{ task.getStructure() }}</p>
									</div>
									<!-- Footer -->
									<div class="modal-footer">
										<button class="btn btn-success pull-left" data-dismiss="modal">Editer</button>
										<button class="btn btn-danger pull-left" data-dismiss="modal">Supprimer</button>
										<button class="btn btn-primary" data-dismiss="modal">Fermer</button>
									</div>
								</div>
							</div>
						</div>
						<!-- Fin modal view -->
					</tr>
					{% else %}
					<!-- besoin d'avoir le même nombre de cellules, sinon erreur javascript -->
					<tr class="sous_ensemble">
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td style="text-align: left; padding-left: 20px;">Aucune tache
							trouvee</td>
						<td></td>
						<td></td>
					</tr>
					{% endfor %}

				</tbody>
			</table>
		</div>
		<!-- /.box-body -->
	</div>
	<!-- /.box -->


</section>
